steps:

# Create workspace (if does not exist)
- task: TerraformCLI@0
  displayName: 'Terraform Workspace new'
  inputs:
    workingDirectory: '$(System.DefaultWorkingDirectory)/$(Service)/'
    command: 'workspace'
    workspaceSubCommand: 'new'
    workspaceName: $(Environment)

# Select workspace (if exists)
- task: TerraformCLI@0
  condition: Failed()
  displayName: 'Terraform Workspace select'
  inputs:
    workingDirectory: '$(System.DefaultWorkingDirectory)/$(Service)/'
    command: 'workspace'
    workspaceSubCommand: 'select'
    workspaceName: $(Environment)